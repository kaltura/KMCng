<kLoader [loading]="_handler.loading" [loadingError]="_handler.loadingError" (onActionRequested)="_onLoadingAction($event)">
	<div class="jumpTo">
		<p-menu #menu popup="popup" [model]="_jumpToMenu" [appendTo]="'body'"></p-menu>
		<button type="button" class="kButtonDefault" pButton icon="kIcondropdown_arrow_bottom" iconPos="right" label="{{'applications.content.entryDetails.metadata.jumpTo' | translate}}" (click)="menu.toggle($event)"></button>
	</div>
	<div class="kMetadataDetails" *ngIf="_handler.data" >

		<form [formGroup]="_handler.metadataForm" novalidate>
			<div class="kRow kValign">
				<span class="kLabels">{{'applications.content.entryDetails.metadata.entryID' | translate}}</span>
				<span>{{ _handler.data.id }}</span>
			</div>
			<div class="kRow kValign">
				<span class="kLabels">{{'applications.content.entryDetails.metadata.entryName' | translate}}</span>
				<input formControlName="name" type="text" pInputText/>
			</div>
			<div class="kRow">
				<span class="kLabels">{{'applications.content.entryDetails.metadata.description' | translate}}</span>
				<textarea formControlName="description" class="threeRows" pInputTextarea></textarea>
			</div>
			<div class="kRow kValign">
				<span class="kLabels">{{'applications.content.entryDetails.metadata.tags' | translate}}</span>
				<kAutoComplete formControlName="tags"
							   suggestionItemField="item"
							   suggestionSelectableField="isSelectable"
							   [multiple]="true"
							   placeholder="{{'applications.entries.entryMetadata.searchTagsPH' | translate}}"
							   [minLength]="3"
							   [suggestionsProvider]="_tagsProvider"
							   (completeMethod)="_searchTags($event)"
				></kAutoComplete>
			</div>
			<div class="kRow kValign">
				<span class="kLabels">{{'applications.content.entryDetails.metadata.categories' | translate}}</span>
				<kAutoComplete formControlName="categories"
							   field="name"
							   suggestionItemField="item"
							   suggestionLabelField="name"
							   suggestionSelectableField="isSelectable"
							   [multiple]="true"
							   placeholder="{{'applications.entries.entryMetadata.searchCategoriesPH' | translate}}"
							   [minLength]="3"
							   [suggestionsProvider]="_categoriesProvider"
							   (completeMethod)="_searchCategories($event)"
				></kAutoComplete>
			</div>
			<div class="kRow">
				<span class="kLabels">{{'applications.content.entryDetails.metadata.offlineMsg' | translate}} (<b>[TBD] HIDE</b>)</span>
				<textarea formControlName="offlineMessage" class="threeRows" pInputTextarea></textarea>
			</div>
			<div class="kRow kValign">
				<span class="kLabels">{{'applications.content.entryDetails.metadata.refId' | translate}}</span>
				<input formControlName="referenceId" type="text" pInputText/>
			</div>
		</form>

		<hr style="margin-top: 24px"/>

		<div *ngFor="let customDataForm of _handler.customDataForms">
			<div class="kSchemaTitle">{{customDataForm.metadataProfile.name}}</div>
			<div *ngIf="customDataForm && customDataForm.isReady">
				<k-dynamic-form-item [control]="customDataForm.dynamicSection" [form]="customDataForm.formGroup">
					<template let-item="item">
						<k-prime-control [control]="item.control" [form]="item.form"></k-prime-control>
					</template>
				</k-dynamic-form-item>
			</div>
		</div>
	</div>
</kLoader>
