<k-area-blocker [showLoader]="_isBusy" [message]="_areaBlockerMessage">
  <div class="kMyUserSettingsWrapper kContent">
    <section class="kFormContainer">
      <div class="kTitle">
        <i class="kIconUsers"></i>
        {{'applications.settings.myUserSettings.userDetails' | translate}}
      </div>
      <div class="kInformationSection">
        <i class="kIconwarning"></i>
        <span>{{'applications.settings.accountSettings.informationMessage' | translate}}</span>
      </div>
      <div class="kUserDetailsSection">
        <div class="kRow">
          <div class="kLabel">{{'applications.settings.myUserSettings.userName' | translate}}</div>
          <span>{{_user?.fullName}}</span>
          <i class="kIconpen" (click)="_editUserName()"></i>
        </div>
        <div class="kRow">
          <div class="kLabel">{{'applications.settings.myUserSettings.userId' | translate}}</div>
          <span>{{_user?.id}}</span>
        </div>
        <div class="kRow">
          <div class="kLabel">{{'applications.settings.myUserSettings.emailAddress' | translate}}</div>
          <span>{{_user?.email}}</span>
          <i class="kIconpen" (click)="_editEmailAddress()"></i>
        </div>
        <div class="kRow">
          <div class="kLabel">{{'applications.settings.myUserSettings.role' | translate}}</div>
          <span>{{_role?.name}}</span>
        </div>
        <div class="kRow">
          <div class="kLabel">{{'applications.settings.myUserSettings.roleDescription' | translate}}</div>
          <span>{{_role?.description}}</span>
        </div>
        <div class="kRow">
          <div class="kLabel">{{'applications.settings.myUserSettings.password' | translate}}</div>
          <span>
            <a (click)="_changePassword()">{{'applications.settings.myUserSettings.editUser' | translate}}</a>
          </span>
        </div>
      </div>
    </section>
  </div>

  <kPopupWidget #editUserNamePopup data-aid="editUserNamePopup" [popupWidth]="600" [popupHeight]="455" [modal]="true" [preventPageScroll]="true">
    <ng-template>
      <kEditUserName [parentPopupWidget]="editUserNamePopup"
                     [user]="_user"
                     [blockerMessage]="_updateBlockerMessage"
                     (updateLoginData)="_updateLoginData($event, 'editUserNamePopup')"></kEditUserName>
    </ng-template>
  </kPopupWidget>

  <kPopupWidget #editEmailAddressPopup data-aid="editEmailAddressPopup" [popupWidth]="600" [popupHeight]="370" [modal]="true" [preventPageScroll]="true">
    <ng-template>
      <kEditEmailAddress [parentPopupWidget]="editEmailAddressPopup"
                         [user]="_user"
                         [blockerMessage]="_updateBlockerMessage"
                         (updateEmail)="_updateEmail($event, 'editEmailAddressPopup')"></kEditEmailAddress>
    </ng-template>
  </kPopupWidget>

  <kPopupWidget #changePasswordPopup data-aid="changePasswordPopup" [popupWidth]="600" [popupHeight]="440" [modal]="true" [preventPageScroll]="true">
    <ng-template>
      <kChangePassword [parentPopupWidget]="changePasswordPopup"
                       [user]="_user"
                       [blockerMessage]="_updateBlockerMessage"
                       (updateLoginData)="_updateLoginData($event, 'changePasswordPopup')"></kChangePassword>
    </ng-template>
  </kPopupWidget>
</k-area-blocker>
