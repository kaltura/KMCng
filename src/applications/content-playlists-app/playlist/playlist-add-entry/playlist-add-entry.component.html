<k-area-blocker [showLoader]="isBusy" [message]="_blockerMessage">
  <div class="kAddEntryWrap kEntries kOverrideFAIcons">
    <div #entriesTableHolder class="kEntriesHolder">
      <div class="kFloater">
        <div class="kHeader">
          <span class="kTitle">{{'applications.content.playlists.addEntry' | translate}}</span>
          <div class="kButtons">
            <a class="kCancel" (click)="closePopupWidget()">Cancel</a>
            <button type="button" class="kButtonDefault" disabled pButton label="{{'applications.content.playlists.addToPlaylist' | translate}}"></button>
          </div>
        </div>
        <div class="kContainer">
          <div class="kEntriesTableFilters" *ngIf="(_entriesStore.entries$ | async)?.totalCount">
            <span class="kSelectedEntriesNum" *ngIf="(_entriesStore.entries$ | async)?.totalCount">{{(_entriesStore.entries$ | async)?.totalCount}} {{'applications.content.entries.entries' | translate}}</span>
            <div [class.kHidden]="!_selectedEntries.length" class="kBulkOperations">
              <span class="kSelectedEntriesLabel">â€¢ {{_selectedEntries.length}} {{'applications.content.entries.selected' | translate}}</span>
              <p-checkbox label="{{'applications.content.filters.showSelectedOnly' | translate}}" (onChange)="showSelectedOnly($event)"></p-checkbox>
              <a class="kBulkClear" (click)="clearSelection()">{{'applications.content.filters.clear' | translate}}</a>
            </div>
            <div [class.kHidden]="_selectedEntries.length" class="kFilters">
              <input type="text" pInputText class="kSearchInput"
                     [(ngModel)]="_filter.freetextSearch"
                     (keyup.enter)="onFreetextChanged()"
                     placeholder="{{'applications.content.entries.searchEntries' | translate}}">
              <div #categoriesFilterBtn class="kCategoriesFilter" (click)="openCategories()"><i class="kIconfolder"></i><span>{{'applications.content.entries.filterCategories' | translate}}</span><i class="kIcondropdown_arrow_bottom dropdown"></i></div>
              <div #refineBtn class="kRefine"><i class="kIconfilter"></i><span>{{'applications.content.entries.refine' | translate}}</span><i class="kIcondropdown_arrow_bottom dropdown"></i></div>
            </div>
          </div>
          <kEntriesTable
            [entries]="entries"
            [filter]="_filter"
            (sortChanged)="onSortChanged($event)"
            (actionSelected)="onActionSelected($event)"
            [(selectedEntries)]="_selectedEntries"></kEntriesTable>
          <div class="kEntriesTableFooter" #footer *ngIf="(_entriesStore.entries$ | async)?.totalCount">
            <p-paginator
              [rows]="_filter.pageSize" (onPageChange)="onPaginationChanged($event)"
              [first]="_filter.pageIndex * _filter.pageSize"
              [totalRecords]="(_entriesStore.entries$ | async)?.totalCount | kMaxEntries"
              [rowsPerPageOptions]="[25,50,75,100]"></p-paginator>
            <span class="kPaginatorShowRowsLabel">{{'applications.content.paginator.showRows' | translate}}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</k-area-blocker>

<!-- popup widgets section -->
<kPopupWidget #categoriesFilterPopup [appendTo]="entriesTableHolder" [popupWidth]="400" [popupHeight]="500" [closeBtn]="false" [targetRef]="categoriesFilterBtn" [targetOffset]="{'x':110, 'y': 121}">
  <kCategoriesFilter [parentPopupWidget]="categoriesFilterPopup"></kCategoriesFilter>
</kPopupWidget>

<!--<kPopupWidget #refinePopup [appendTo]="entriesTableHolder" [popupWidth]="400" [popupHeight]="500" [closeBtn]="false" [targetRef]="refineBtn" [targetOffset]="{'x':-200, 'y': -20}">
  <ng-template>
    <k-entries-refine-filters [parentPopupWidget]="refinePopup" ></k-entries-refine-filters>
  </ng-template>
</kPopupWidget>-->
