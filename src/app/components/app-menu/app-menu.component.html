<div #appmenu class="appMenu">

      <div class="k-logo"></div>

      <div *ngFor="let item of menuConfig">
        <a [routerLinkActive]="['activeLink']" [routerLink]="['/'+item.routePath]">{{'app.menu.'+item.titleToken | translate | uppercase}}</a>
      </div>

    <div class="kMenu-right">
        <button pButton label="{{'app.menu.upload' | translate | uppercase}}" class="kButtonDefault kUploadBtn"></button>
        <i class="kIconfolder_large"></i>
        <i class="kIconuser"></i>
        <i class="kIcongear"></i>
        <i #help class="kIconhelp"  [class.open]="helpOpen"></i>
        <div #username class="kUserName" [class.open]="userSettingsOpen">
            <span>{{_userContext.fullName}}</span>
            <i class="kIcondropdown_arrow_bottom"></i>
        </div>
    </div>
      <!--div>
        <a (click)="toggleUpload()" [class.uploadOpen]="uploadOpen" class="widgetLink">{{ 'MENU.upload' | translate }} &nbsp;&nbsp;{{uploadOpen ? '&#x25B2;' : '&#x25BC;'}}</a>
        <kmc-upload [uploadOpen]="uploadOpen"></kmc-upload>
      </div>

      <div style="display: flex; flex: 1 1 auto; justify-content: flex-end">
        <div>
          <kmc-user-settings></kmc-user-settings>
        </div>
        <div>
          <kmc-language-menu class="langMenu"></kmc-language-menu>
        </div>
      </div-->

</div>

<div class="appSubMenu" *ngIf="selectedMenuItem && showSubMenu && selectedMenuItem.children">
    <div class="kContent">
        <div *ngFor="let subitem of selectedMenuItem.children" class="subMenuContainer" [routerLinkActive]="['active']">
          <a [routerLinkActive]="['activeLink']" [routerLink]="['/'+subitem.routePath]">{{'app.menu.'+subitem.titleToken | translate | uppercase}}</a>
          <div class="linkMarker"></div>
        </div>
    </div>
</div>

<kPopupWidget #usersettings [appendTo]="appmenu" [popupWidth]="240" [closeBtn]="false" [targetRef]="username" [targetOffset]="{'x':-50, 'y': 30}" (onOpen)="userSettingsOpen=true" (onClose)="userSettingsOpen=false">
    <kmc-user-settings></kmc-user-settings>
</kPopupWidget>

<kPopupWidget #helpmenu [showTooltip]="true" [appendTo]="appmenu" [popupWidth]="240" [closeBtn]="false" [targetRef]="help" [targetOffset]="{'x':-109, 'y': 35}" (onOpen)="helpOpen=true" (onClose)="helpOpen=false">
    <p class="kHelpTitle">{{'app.helpMenu.gettingStarted' | translate | uppercase}}</p>
    <p class="kHelpLink">{{'app.helpMenu.kmcOverview' | translate}}</p>
    <p class="kHelpLink">{{'app.helpMenu.mediaManagement' | translate}}</p>
    <p class="kHelpLink">{{'app.helpMenu.productTour' | translate}}</p>
    <hr>
    <p class="kHelpTitle">{{'app.helpMenu.support' | translate | uppercase}}</p>
    <p class="kHelpLink">{{'app.helpMenu.userManual' | translate}}</p>
    <p class="kHelpLink">{{'app.helpMenu.contact' | translate}}</p>
    <div class="kContexualHelp">
        <hr>
        <p class="kHelpTitle">{{'app.helpMenu.currentPage' | translate | uppercase}}</p>
        <p class="kHelpLink">Contextual link 1</p>
        <p class="kHelpLink">Contextual link 2</p>
    </div>
</kPopupWidget>
