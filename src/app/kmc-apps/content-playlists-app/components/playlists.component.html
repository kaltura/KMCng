<div class="miniApp">
  <p>Playlists</p>
  <form [formGroup]="searchForm">
    <label for="search">Search:</label>
    <input type="text" id="search" formControlName="search" #search>
  </form><br>
  <button pButton type="text" (click)="refresh(); search.value=''; dt.reset()" icon="fa-refresh" label="Refresh" title="Refresh" class="refreshBtn"></button>

  <span [hidden]="(playlists && playlists.length !== 0) || search.value.length != 0">Loading Playlists...</span>

  <div class="tableHolder">

    <p-dataTable [value]="playlists" scrollable="true" [hidden]="!playlists || playlists.length===0" scrollHeight="100%" #dt>
      <p-column field="id" header="ID" [sortable]="true" [style]="{'width':'100px'}"></p-column>
      <p-column field="name" header="Name" [sortable]="true">
        <template let-col let-playlist="rowData" pTemplate type="body">
          <a (click)="onActionSelected('view',playlist.id)">{{playlist[col.field]}}</a>
        </template>
      </p-column>
      <p-column field="playlistType" header="Type" [sortable]="true" [style]="{'width':'140px', 'text-align': 'center'}">
        <template let-col let-playlist="rowData" pTemplate type="body">
          <span>{{playlist[col.field] | playlistType}}</span>
        </template>
      </p-column>
      <p-column field="createdAt" header="Created On" [sortable]="true" [style]="{'width':'140px'}">
        <template let-col let-playlist="rowData" pTemplate type="body">
          <span>{{playlist[col.field] * 1000 | date:'MM/dd/y HH:MM'}}</span>
        </template>
      </p-column>
      <p-column header="Action" [style]="{'overflow':'visible', 'width':'180px'}">
        <template let-col let-playlist="rowData" pTemplate type="body">
          <div class="btn-group" dropdown>
            <button id="single-button" type="button" class="btn btn-xs actionsBtn" dropdownToggle>
              Select Action <span class="caret"></span>
            </button>
            <ul dropdownMenu role="menu" aria-labelledby="single-button" style="z-index: 1000">
              <li role="menuitem"><a class="dropdown-item" (click)="onActionSelected('embed',playlist.id)">Preview & Embed</a></li>
              <li role="menuitem"><a class="dropdown-item" (click)="onActionSelected('delete',playlist.id)">Delete</a></li>
              <li role="menuitem"><a class="dropdown-item" (click)="onActionSelected('view',playlist.id)">View Details</a></li>
            </ul>
          </div>
        </template>
      </p-column>
    </p-dataTable>
    <!--table style="width:100%" class="entries" #dt>
      <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Type</th>
        <th>Created On</th>
        <th>Action</th>
      </tr>
      <tr *ngFor="let playlist of playlists$ | async">
        <td>{{playlist.id}}</td>
        <td><a>{{playlist.name}}</a></td>
        <td>{{playlist.playlistType | playlistType}}</td>
        <td>{{playlist.createdAt * 1000 | date:'MM/dd/y HH:MM'}}</td>
        <td>
          <div class="btn-group" dropdown>
            <button id="single-button" type="button" class="btn btn-info" dropdownToggle>
              Select Action <span class="caret"></span>
            </button>
            <ul dropdownMenu role="menu" aria-labelledby="single-button">
              <li role="menuitem"><a class="dropdown-item" (click)="onActionSelected('embed',playlist.id)">Preview & Embed</a></li>
              <li role="menuitem"><a class="dropdown-item" (click)="onActionSelected('delete',playlist.id)">Delete</a></li>
              <li role="menuitem"><a class="dropdown-item" (click)="onActionSelected('view',playlist.id)">View Details</a></li>
            </ul>
          </div>
        </td>
      </tr>
    </table-->
  </div>
</div>
